(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{2555:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/climate-change",function(){return r(5823)}])},5823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var l=r(7876),n=r(4232),a=r(7467),o=r(9704),i=r(8291),s=r(5050),c=r(6080),d=r(322),u=r(8755);let h={latitude:43.6532,longitude:-79.3832,name:"Toronto, Canada"},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(()=>{let e=new Date;return e.setFullYear(e.getFullYear()-30),e})(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,[a,o]=(0,n.useState)({currentTemp:null,historicalMean:null,difference:null,locationName:null}),[i,s]=(0,n.useState)({}),[c,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),g=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{g.current||((async()=>{if(d(!0),m(null),r){let e={};for(let t in r){let l=r[t],n=new Date(t),a=n.getFullYear(),o=n.getMonth(),i=n.getDate();e[a]||(e[a]={}),e[a][o]||(e[a][o]={}),e[a][o][i]=l}s(e),d(!1),g.current=!0;return}let l=h.latitude,n=h.longitude,a=h.name;try{var i,c,u;let r=await fetch("https://api.open-meteo.com/v1/forecast?latitude=".concat(l,"&longitude=").concat(n,"&current_weather=true&temperature_unit=celsius&timezone=auto")).then(e=>e.json()),d=null==r||null==(i=r.current_weather)?void 0:i.temperature;if(void 0===d)throw Error("Could not fetch current temperature.");let h=await fetch("https://archive-api.open-meteo.com/v1/archive?latitude=".concat(l,"&longitude=").concat(n,"&start_date=").concat(e.toISOString().split("T")[0],"&end_date=").concat(t.toISOString().split("T")[0],"&daily=temperature_2m_mean&temperature_unit=celsius&timezone=auto")).then(e=>e.json()),m=null==h||null==(c=h.daily)?void 0:c.temperature_2m_mean,g=null==h||null==(u=h.daily)?void 0:u.time;if(!m||0===m.length||!g||0===g.length)throw Error("Could not fetch historical temperature data.");let p={};g.forEach((e,t)=>{let r=new Date(e),l=r.getFullYear(),n=r.getMonth(),a=r.getDate();p[l]||(p[l]={}),p[l][n]||(p[l][n]={}),p[l][n][a]=m[t]}),s(p),o({currentTemp:d,historicalMean:null,difference:null,locationName:a})}catch(e){console.error("Open-Meteo API error:",e),m("Failed to fetch weather data: ".concat(e.message))}finally{d(!1)}})(),g.current=!0)},[e,t]),{weatherData:a,historicalData:i,loading:c,error:u,defaultYear:l}};var g=r(9010),p=r(555),x=r(4188),f=r(4826);let j=e=>{let{historicalData:t,loading:r,error:o}=e,[i,c]=(0,n.useState)(new Date().getFullYear().toString()),d=(0,n.useCallback)((e,r)=>{let l=[];for(let n in t)t[n][e]&&t[n][e][r]&&l.push(t[n][e][r]);return 0===l.length?null:[l.reduce((e,t)=>e+t,0)/l.length,l]},[t]),u=e=>null===e||isNaN(e)?0:12e3==e?6:e>=5?5:e>=1?4:e>=-1?3:e>=-5?2:+(e<=-5),h=(0,n.useMemo)(()=>{let e=[],r=parseInt(i);for(let l=0;l<12;l++){let n=new Date(r,l+1,0).getDate();for(let a=1;a<=n;a++){let n;if(t&&t[r]&&t[r][l]&&t[r][l][a]&&(n=t[r][l][a]),void 0===n){let t=String(l+1).padStart(2,"0"),n=String(a).padStart(2,"0"),o="".concat(r,"-").concat(t,"-").concat(n);e.push([o,0])}else{let t=d(l,a),o=null;void 0!==n&&null!==t&&(o=n-t[0]),null!=t&&Math.max(...t[1])===n&&(o=u(12e3));let i=String(l+1).padStart(2,"0"),s=String(a).padStart(2,"0"),c="".concat(r,"-").concat(i,"-").concat(s);e.push([c,u(o)])}}}return Object.fromEntries(e)},[t,i]),m=(0,n.useMemo)(()=>{let e=[],t=new Date().getFullYear();for(let r=0;r<30;r++){let l=t-r;e.push({value:l.toString(),label:l.toString()})}return e},[]),j=e=>{let[r,l,n]=e.split("-").map(Number);return t[r][l-1][n]},w=e=>{let[t,r,l]=e.split("-").map(Number);return d(r-1,l)[0]};return(0,l.jsxs)(a.a,{style:{overflowX:"auto",paddingBottom:"1rem"},children:[(0,l.jsxs)("h3",{children:["Historical Weather Heatmap for ",i]}),(0,l.jsx)(p.l,{label:"Select Year",placeholder:"Pick one",data:m,value:i,onChange:e=>c(e||new Date().getFullYear().toString()),mb:"md"}),r&&(0,l.jsx)("p",{children:"Loading historical data..."}),o&&(0,l.jsxs)("p",{children:["Error: ",o]}),(0,l.jsxs)(a.a,{flex:1,dir:"row",children:[!r&&!o&&(0,l.jsx)(g.R,{data:h,withTooltip:!0,withWeekdayLabels:!0,withMonthLabels:!0,startDate:new Date(Number(i),0,1),endDate:new Date(Number(i),11,31),colors:["gray","blue","cyan","green","orange","coral","red"],getTooltipLabel:e=>{let{date:t,value:r}=e;return t&&r?"".concat(t,": was ").concat(j(t).toFixed(1),"\xb0 which is ").concat(Math.abs(j(t)-w(t)).toFixed(1),"\xb0 ").concat(j(t)>w(t)?"above":"below"," the historical average of ").concat(w(t).toFixed(1),"\xb0"):"No Data"}}),(0,l.jsx)(s.E,{size:"sm",mt:"md",children:(0,l.jsx)("strong",{children:"Legend:"})}),(0,l.jsxs)(x.Y,{mt:"xs",dir:"col",children:[(0,l.jsx)(f.E,{color:"red",variant:"filled",children:"Hottest day on record"}),(0,l.jsxs)(f.E,{color:"coral",variant:"filled",children:[">","5\xb0C Hotter"]}),(0,l.jsxs)(f.E,{color:"orange",variant:"filled",children:[">","2\xb0C Hotter"]}),(0,l.jsx)(f.E,{color:"green",variant:"filled",children:"Normal"}),(0,l.jsxs)(f.E,{color:"cyan",variant:"filled",children:["<"," -2\xb0C Colder"]}),(0,l.jsxs)(f.E,{color:"blue",variant:"filled",children:["<"," -5\xb0C Colder"]}),(0,l.jsx)(f.E,{color:"gray",variant:"filled",children:"No Data"})]})]})]})};var w=r(8542),v=r.n(w);let b=()=>{let{weatherData:e,historicalData:t,loading:r,error:h}=m(void 0,void 0,void 0,new Date().getFullYear()),g=new Date,[p,x]=(0,n.useState)(null),[f,w]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(null!==e.currentTemp&&t){let r=g.getMonth(),l=g.getDate(),n=[];for(let e in t)t[e][r]&&t[e][r][l]&&n.push(t[e][r][l]);if(n.length>0){let t=n.reduce((e,t)=>e+t,0)/n.length;x(t),w(e.currentTemp-t)}else x(null),w(null)}},[e.currentTemp,t,g]),(0,l.jsx)(a.a,{py:"xl",className:v().dynamicBackground,children:(0,l.jsxs)(o.t,{shadow:"sm",p:"xl",withBorder:!0,className:v().container,children:[(0,l.jsx)(i.h,{order:2,mb:"md",children:"Our Climate, Our Future"}),(0,l.jsx)(s.E,{size:"lg",mb:"xl",style:{textAlign:"left"},children:"For almost 10 years I have reduced my consumption of fossil fuels and other carbon-intensive activities. I do this because I believe that individual actions can collectively make a significant impact on our planet's health. By understanding local weather patterns and their changes, we can better advocate for policies and practices that support sustainability and resilience in our communities."}),(0,l.jsx)(i.h,{order:3,mb:"md",children:"Is Today Weirdly Hot/Cold?"}),(0,l.jsxs)(c.x,{gutter:"xl",children:[(0,l.jsxs)(c.x.Col,{span:12,children:[r&&(0,l.jsxs)(d.o,{my:"xl",children:[(0,l.jsx)(u.a,{size:"lg"}),(0,l.jsx)(s.E,{ml:"md",children:"Fetching weather data..."})]}),h&&(0,l.jsxs)(s.E,{color:"red",my:"xl",children:["Error: ",h]}),!r&&!h&&null!==e.currentTemp&&null!==p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.E,{mb:"md",children:["Current temperature in ",e.locationName,":"," ",(0,l.jsxs)("strong",{children:[e.currentTemp.toFixed(1),"\xb0C"]})]}),(0,l.jsxs)(s.E,{mb:"xl",children:["Historical mean for this period (last 30 years):"," ",(0,l.jsxs)("strong",{children:[p.toFixed(1),"\xb0C"]})]}),(0,l.jsxs)(s.E,{size:"lg",mb:"xl",children:["This is"," ",(0,l.jsxs)("strong",{children:[f&&f>0?"+":"",null==f?void 0:f.toFixed(1),"\xb0C"]})," ",f&&f>0?"hotter":"colder"," ","than usual for this date!"]}),(0,l.jsx)(s.E,{mb:"md",style:{fontSize:"5rem"},children:(e=>null===e?"\uD83C\uDF21️":e>5?"\uD83D\uDD25":e>2?"☀️":e<-5?"\uD83E\uDD76":e<-2?"❄️":"\uD83C\uDF43")(f)})]})]}),(0,l.jsx)(c.x.Col,{span:12,children:(0,l.jsx)(o.t,{shadow:"sm",p:"md",withBorder:!0,children:(0,l.jsx)(j,{historicalData:t,loading:r,error:h})})})]}),(0,l.jsxs)(s.E,{size:"sm",mt:"md",style:{textAlign:"left"},children:["Weather data provided by:"," ",(0,l.jsx)("a",{href:"https://open-meteo.com/",target:"_blank",rel:"noopener noreferrer",children:"Open-Meteo.com"})]}),(0,l.jsxs)(s.E,{size:"sm",style:{textAlign:"left"},children:["Support climate action:"," ",(0,l.jsx)("a",{href:"https://www.climatesolutions.ca/climate-defense-fund-ontario",target:"_blank",rel:"noopener noreferrer",children:"Climate Defense Fund of Ontario"})]})]})})},y=()=>(0,l.jsx)(b,{})},8542:e=>{e.exports={dynamicBackground:"weather-check_dynamicBackground__YVK17",container:"weather-check_container__zoQVv"}}},e=>{e.O(0,[701,398,13,636,593,792],()=>e(e.s=2555)),_N_E=e.O()}]);